/*!
 * Zest
 * A light-weight DOM library
 * v0.0.1 (https://github.com/ItsJonQ/Zest)
 * Copyright 2014 Jon Q
 * Licensed under MIT (https://github.com/itsjonq/zest/blob/master/LICENSE)
 */

!function(a,b,c){"use strict";var d=b,e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,f=function(a){return new f.fn.init(a)},g=f;f.fn=f.prototype;var h=f.fn.init=function(a){return a?(this._create(a),this):!1};return h.prototype=f.fn,f.prototype._addClass=function(a){if(!a)return this;var b,c=this;if(b=this.classList?function(a){c.classList.add(a)}:function(a){c.className+=" "+a},a instanceof Array)for(var d=0,e=a.length;e>d;d++)b(a[d]);else b(a);return this},f.prototype._create=function(a){if(!a)return!1;if(this._events={},this._memo={},this._listeners={},"string"==typeof a)return this._el=this._parseSelector(a),this.length=this._el.length,this;if(a instanceof f)return this._el=[a.els()],this.length=this._el.length,this;if(a instanceof Array){for(var b=[],c=0,d=a.length;d>c;c++)1===a[c].nodeType&&b.push(a[c]);return this._el=b,this.length=this._el.length,this}return a instanceof HTMLElement||a instanceof Node?(this._el=[a],this.length=this._el.length,this):a instanceof HTMLCollection?(this._el=this._toArray.call(a),this.length=this._el.length,this):this},f.prototype._getEventTarget=function(b){return b=b||a.event,b.target||b.srcElement},f.prototype._getMatcher=function(a){var b;return a.matches&&(b=a.matches),a.webkitMatchesSelector&&(b=a.webkitMatchesSelector),a.mozMatchesSelector&&(b=a.mozMatchesSelector),a.msMatchesSelector&&(b=a.msMatchesSelector),a.oMatchesSelector&&(b=a.oMatchesSelector),b},f.prototype._onChange=function(a){var b=this._listeners[a];if(!b)return this;var c=b.length;if(c)for(var d=0;c>d;d++)b[d]();return this},f.prototype._parseSelector=function(a,b){var c=b?b:d,f=e.exec(a);return f?f[1]?[c.getElementById(f[1])]:f[2]?this._toArray.call(c.getElementsByTagName(a)):f[3]?this._toArray.call(c.getElementsByClassName(f[3])):[]:this._toArray.call(c.querySelectorAll(a))},f.prototype._parseTo=function(a,b){if(!a||!b||"string"!=typeof b)return!1;b=b.toLowerCase();var c;return c="array"===b?a.split(" "):!1},f.prototype._removeClass=function(a){if(!a)return this;var b,c=this;if(b=this.classList?function(a){c.classList.remove(a)}:function(){c.className=c.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},a instanceof Array)for(var d=0,e=a.length;e>d;d++)b(a[d]);else b(a);return this},f.prototype._toArray=function(){for(var a=[],b=0,c=this.length;c>b;b++)a.push(this[b]);return a},f.prototype._visible=function(){var a=d.documentElement,b=this.clientRect();return!!b&&b.bottom>0&&b.right>0&&b.top<a.clientHeight&&b.left<a.clientWidth},f.prototype.addClass=function(a){return a&&"string"==typeof a?(/( )/.test(a)&&(a=this._parseTo(a,"array")),this.forEach(function(b){this._addClass.call(b,a)}),this._onChange("addClass"),this):this},f.prototype.addEvent=function(a,b,d){return a&&"string"==typeof a&&b&&"function"==typeof b?(this.forEach(function(e){e in this._events||(this._events[e]={}),(!(a in this._events[e])||this._events[e]&&this._events[e][a]===c)&&(this._events[e][a]=[]),this._events[e][a].push([b,d]),e.addEventListener(a,b,d)}),this._onChange("addEvent"),this):this},f.prototype.after=function(a){return a&&"string"==typeof a?(this.each(function(){this.insertAdjacentHTML("afterend",a)}),this._onChange("after"),this):this},f.prototype.append=function(a){return a&&"object"==typeof a?(this.each(function(){var b=a.cloneNode(!0);this.appendChild(b)}),this._onChange("append"),this):this},f.prototype.before=function(a){return a&&"string"==typeof a?(this.each(function(){this.insertAdjacentHTML("beforebegin",a)}),this._onChange("before"),this):this},f.prototype.child=function(){var a=this.firstEl().children;if(a){var b=a[0],c=b.tagName.toLowerCase(),d=g(b);return d.selector=this.selector+" "+c,d}return this},f.prototype.children=function(){var a=this.firstEl().children;if(a){var b=a[0].tagName.toLowerCase(),c=g(a);return c.selector=this.selector+" "+b,c}return this},f.prototype.clientRect=function(){return this._el[0].getBoundingClientRect()},f.prototype.clone=function(){var a=g(this._el);return a.selector=this.selector,this._onChange("clone"),a},f.prototype.combine=function(){for(var a=Array.prototype.slice.call(arguments),b=[],c=0,d=a.length;d>c;c++)if("string"==typeof a[c])for(var e=this._parseSelector(a[c]),f=0,g=e.length;g>f;f++)b.push(e[f]);return this._el=this._el.concat(b),this.length=this._el.length,this._onChange("combine"),this},f.prototype.contains=function(a){if(!a||"string"!=typeof a)return!1;var b=!1;return this._parseSelector(a,this.firstEl()).length>0&&(b=!0),b},f.prototype.each=function(a){if(!a||"function"!=typeof a)return this;for(var b=0,c=this.length;c>b;b++)a.call(this._el[b],b,this._el[b]);return this},f.prototype.el=function(a){return a&&"number"==typeof a&&a<=this.length-1?this._el[a]:this._el[0]},f.prototype.els=function(a){return a&&"number"==typeof a&&a<=this.length-1?this._el[a]:this._el},f.prototype.empty=function(){return this.forEach(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)}),this._onChange("empty"),this},f.prototype.filter=function(a){if(!a||"function"!=typeof a)return this;for(var b=[],c=0,d=this.length;d>c;c++){var e=this._el[c];a(e,c,this._el)&&b.push(e)}return this._el=b,this.length=this._el.length,this._onChange("filter"),this},f.prototype.find=function(a){if(!a)return this;var b=this.selector,c=[];this.forEach(function(b){for(var d=this._parseSelector(a,b),e=0,f=d.length;f>e;e++)c.push(d[e])});var d=g(c);return d.selector=b?b+" "+a:a,d},f.prototype.first=function(){var a=g(this._el[0]);return a.selector=this.selector,a},f.prototype.firstEl=function(){return this.el()},f.prototype.forEach=function(a){if(!a||"function"!=typeof a)return this;for(var b=0,c=this.length;c>b;b++)a.call(this,this._el[b],b);return this},f.prototype.getAttribute=function(a){return a&&"string"==typeof a?this._el[0].getAttribute(a):this},f.prototype.innerHTML=function(){return this.firstEl().innerHTML},f.prototype.inViewport=function(){return this._visible()},f.prototype.is=function(a){return!a||"object"!=typeof a||!a instanceof f?!1:this===a},f.prototype.hasClass=function(a){return a&&"string"==typeof a?this._el[0].classList.contains(a):this},f.prototype.hide=function(){return this.each(function(){this.style.display="none"}),this._onChange("hide"),this},f.prototype.html=function(a){return a||this.innerHTML(),this.forEach(function(b){b.innerHTML=a}),this},f.prototype.last=function(){var a=g(this._el[this.length-1]);return a.selector=this.selector,a},f.prototype.lastEl=function(){return this._el[this.length-1]},f.prototype.listen=function(a,b){return a&&"string"==typeof a&&b&&"function"==typeof b?(this._listeners[a]&&this._listeners[a]!==c||(this._listeners[a]=[]),this._listeners[a].push(b),this):this},f.prototype.matches=function(a){if(!a||"string"!=typeof a)return this;var b=this.firstEl();return this._getMatcher(b).call(b,a)},f.prototype.next=function(){var a=this.nextEl();if(a){var b=g(a);return b.selector=this.selector,b}return this},f.prototype.nextEl=function(){return this.firstEl().nextElementSibling},f.prototype.outerHTML=function(){return this.firstEl().outerHTML},f.prototype.parent=function(){return g(this.parentEl())},f.prototype.parents=function(){return g(this.parentsEl())},f.prototype.parentEl=function(){return this.firstEl().parentNode},f.prototype.parentsEl=function(){var a=[];return this.each(function(b){a[b]=this.parentNode}),a},f.prototype.prepend=function(a){return a&&"object"==typeof a?(this.each(function(){var b=a.cloneNode(!0);this.insertBefore(b,this.firstChild)}),this._onChange("prepend"),this):this},f.prototype.previous=function(){var a=this.previousEl();if(a){var b=g(a);return b.selector=this.selector,b}return this},f.prototype.previousEl=function(){return this.firstEl().previousElementSibling},f.prototype.remove=function(){for(this.forEach(function(a){this.removeAllEvents(),a.parentNode.removeChild(a)});this._el.length>0;)this._el.shift();return this.length=0,this._onChange("remove"),this},f.prototype.removeAllEvents=function(){for(var a in this._events)for(var b in this._events[a])this.removeEvent(b);return this._onChange("removeAllEvents"),this},f.prototype.removeAttribute=function(a){return a&&"string"==typeof a?(this.forEach(function(b){b.removeAttribute(a)}),this._onChange("removeAttribute"),this):this},f.prototype.removeClass=function(a){return a&&"string"==typeof a?(/( )/i.test(a)&&(a=this._parseTo(a,"array")),this.forEach(function(b){this._removeClass.call(b,a)}),this._onChange("removeClass"),this):this},f.prototype.removeEvent=function(a,b,d){if(!a||"string"!=typeof a)return this;var e=this;return this.forEach(function(f){if(f in this._events){var g=this._events[f];if(a in g){for(var h=g[a],i=h.length;i--;){var j=h[i];b=b?b:j[0],d=d?d:j[1],f.removeEventListener(a,b,d)}setTimeout(function(){e._events[f][a]=c},16)}}}),this._onChange("removeEvent"),this},f.prototype.setAttribute=function(a,b){return a&&"string"==typeof a&&b&&"string"==typeof b?(this.forEach(function(c){c.setAttribute(a,b)}),this._onChange("setAttribute"),this):this},f.prototype.scrollIntoView=function(a){return a===c&&(a=!0),this._el[0].scrollIntoView(a),this},f.prototype.siblings=function(){var a=this.firstEl(),b=Array.prototype.filter.call(a.parentNode.children,function(b){return b!==a});if(b.length){var c=g(b);return c.selector=this.selector,c}return this},f.prototype.show=function(){return this.each(function(){this.style.display=""}),this._onChange("show"),this},f.prototype.stopListening=function(a){if(!a||"string"!=typeof a)return this;var b=this._listeners[a];return(b||b!==c)&&(b.length=0,this._listeners[a]=c),this},f.prototype.stopListeningAll=function(){for(var a in this._listeners)this._listeners[a]=c;return this},f.prototype.style=function(a,b){return a&&"string"==typeof a&&b?(this.el().style[a]!==c&&this.each(function(){this.style[a]=b}),this):this},f.prototype.text=function(a){return a&&"string"==typeof a?(this.firstEl().textContent=a,this):this.firstEl().textContent},f.prototype.toggle=function(){return this.forEach(function(a){a.clientHeight>0?(a.style.display="none",this._onChange("hide")):(a.style.display="",this._onChange("show"))}),this},f.prototype.toggleClass=function(a){return a&&"string"==typeof a?(this.each(function(){this.classList.contains(a)?(this.classList.remove(a),this._onChange("removeClass")):(this.classList.add(a),this._onChange("addClass"))}),this):this},f.prototype.tojQuery=function(){return a.jQuery||"function"==typeof jQuery?$(this.els()):void 0},f.prototype.to$=function(){return this.tojQuery()},f.prototype.trigger=function(a){if(!a||"string"!=typeof a)return this;var c=b.createEvent("HTMLEvents");return c.initEvent(a,!0,!1),this.each(function(){this.dispatchEvent(c)}),this},a.Z$||(a.Z$=f),a.Zest||(a.Zest=f),f}(this,document);