/**
 * Zest v0.0.1
 * Copyright 2014. Jon Q
 * https://github.com/ItsJonQ/Zest
 * 2014-04-06
 */
!function(a){"use strict";var b=window,c=document,d=function(a){return new e(a)},e=function(a){return a?(this._construct(a),this):!1};return e.prototype._construct=function(a){if(this._el=[],console.log(a instanceof Node),"string"==typeof a&&(this._el=this._parseSelector(a),this.selector=a),a instanceof e&&(this._el=a.els()),a instanceof Array)for(var b=-1,c=a.length;++b<c;)1===a[b].nodeType&&this._el.push(a[b]);return(a instanceof HTMLElement||a instanceof Node||a instanceof HTMLCollection)&&(this._el=this._toArray.call(a)),this.length=this._el.length,this._events={},this._memo={},this._listeners={},this},e.prototype._addClass=function(a){if(!a)return this;var b,c=this;if(b=this.classList?function(a){c.classList.add(a)}:function(a){c.className+=" "+a},a instanceof Array)for(var d=0,e=a.length;e>d;d++)b(a[d]);else b(a);return this},e.prototype._onChange=function(a){var b=this._listeners[a];if(!b)return this;var c=b.length;if(c)for(var d=0;c>d;d++)b[d]();return this},e.prototype._parseSelector=function(a,b){if(!a)return!1;var d,e=b?b:c,f=a[0],g=/(#)/i.test(a),h=/(\.)/i.test(a);return/( )/i.test(a)?d=e.querySelectorAll(a):g&&h?d=e.querySelectorAll(a):"#"!==f||"."!==f?d=g||h?e.querySelectorAll(a):e.getElementsByTagName(a):g?(a=a.replace("#",""),d=e.getElementById(a)):h?(a=a.replace(".",""),d=e.getElementsByClassName(a)):d=e.getElementsByTagName(a),this._toArray.call(d)},e.prototype._parseTo=function(a,b){if(!a||!b||"string"!=typeof b)return!1;b=b.toLowerCase();var c;return c="array"===b?a.split(" "):!1},e.prototype._removeClass=function(a){if(!a)return this;var b,c=this;if(b=this.classList?function(a){c.classList.remove(a)}:function(){c.className=c.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},a instanceof Array)for(var d=0,e=a.length;e>d;d++)b(a[d]);else b(a);return this},e.prototype._toArray=function(){for(var a=[],b=-1,c=this.length;++b<c;)a.push(this[b]);return a},e.prototype._visible=function(){var a=this.getBoundingClientRect();return a.top>=0&&a.left>=0&&a.bottom<=(b.innerHeight||c.documentElement.clientHeight)&&a.right<=(b.innerWidth||c.documentElement.clientWidth)},e.prototype.addClass=function(a){return a&&"string"==typeof a?(/( )/.test(a)&&(a=this._parseTo(a,"array")),this.forEach(function(b){this._addClass.call(b,a)}),this._onChange("addClass"),this):this},e.prototype.addEvent=function(a,b,c){return a&&"string"==typeof a&&b&&"function"==typeof b?(this.forEach(function(d){d in this._events||(this._events[d]={}),a in this._events[d]||(this._events[d][a]=[]),this._events[d][a].push([b,c]),d.addEventListener(a,b,c)}),this._onChange("addEvent"),this):this},e.prototype.append=function(a){return a&&"object"==typeof a?(this.each(function(){var b=a.cloneNode(!0);this.appendChild(b)}),this._onChange("append"),this):this},e.prototype.children=function(){var a=this.firstEl().children;if(a){var b=a[0].tagName.toLowerCase(),c=d(a);return c.selector=this.selector+" "+b,c}return this},e.prototype.clientRect=function(){return this._el[0].getBoundingClientRect()},e.prototype.clone=function(){var a=d(this._el);return a.selector=this.selector,this._onChange("clone"),a},e.prototype.combine=function(){for(var a=Array.prototype.slice.call(arguments),b=[],c=0,d=a.length;d>c;c++)if("string"==typeof a[c])for(var e=this._parseSelector(a[c]),f=0,g=e.length;g>f;f++)b.push(e[f]);return this._el=this._el.concat(b),this.length=this._el.length,this._onChange("combine"),this},e.prototype.contains=function(a){if(!a||"string"!=typeof a)return!1;var b=!1;return this._parseSelector(a,this.firstEl()).length>0&&(b=!0),b},e.prototype.each=function(a){if(!a||"function"!=typeof a)return this;for(var b=-1,c=this.length;++b<c;)a.call(this._el[b],b,this._el[b]);return this},e.prototype.el=function(a){return a&&"number"==typeof a&&a<=this.length-1?this._el[a]:this._el[0]},e.prototype.els=function(a){return a&&"number"==typeof a&&a<=this.length-1?this._el[a]:this._el},e.prototype.empty=function(){return this.forEach(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)}),this._onChange("empty"),this},e.prototype.filter=function(a){if(!a||"function"!=typeof a)return this;for(var b=[],c=-1,d=this.length;++c<d;){var e=this._el[c];a(e,c,this._el)&&b.push(e)}return this._el=b,this.length=this._el.length,this._onChange("filter"),this},e.prototype.find=function(a){if(!a)return this;var b=this.selector,c=[];this.forEach(function(b){for(var d=this._parseSelector(a,b),e=-1,f=d.length;++e<f;)c.push(d[e])});var e=d(c);return e.selector=b?b+" "+a:a,e},e.prototype.first=function(){var a=d(this._el[0]);return a.selector=this.selector,a},e.prototype.firstEl=function(){return this.el()},e.prototype.forEach=function(a){if(!a||"function"!=typeof a)return this;for(var b=-1,c=this.length;++b<c;)a.call(this,this._el[b],b);return this},e.prototype.getAttribute=function(a){return a&&"string"==typeof a?this._el[0].getAttribute(a):this},e.prototype.innerHTML=function(){return this.firstEl().innerHTML},e.prototype.inViewport=function(){return this._visible()},e.prototype.is=function(a){return!a||"object"!=typeof a||!a instanceof e?!1:this===a},e.prototype.hasClass=function(a){return a&&"string"==typeof a?this._el[0].classList.contains(a):this},e.prototype.hide=function(){return this.each(function(){this.style.display="none"}),this._onChange("hide"),this},e.prototype.html=function(a){return a||this.innerHTML(),this.forEach(function(b){b.innerHTML=a}),this},e.prototype.last=function(){var a=d(this._el[this.length-1]);return a.selector=this.selector,a},e.prototype.lastEl=function(){return this._el[this.length-1]},e.prototype.listen=function(a,b){return a&&"string"==typeof a&&b&&"function"==typeof b?(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push(b),this):this},e.prototype.next=function(){var a=this.nextEl();if(a){var b=d(a);return b.selector=this.selector,b}return this},e.prototype.nextEl=function(){return this.firstEl().nextElementSibling},e.prototype.outerHTML=function(){return this.firstEl().outerHTML},e.prototype.parent=function(){return d(this.parentEl())},e.prototype.parents=function(){return d(this.parentsEl())},e.prototype.parentEl=function(){return this.firstEl().parentNode},e.prototype.parentsEl=function(){var a=[];return this.each(function(b){a[b]=this.parentNode}),a},e.prototype.prepend=function(a){return a&&"object"==typeof a?(this.each(function(){var b=a.cloneNode(!0);this.insertBefore(b,this.firstChild)}),this._onChange("prepend"),this):this},e.prototype.previous=function(){var a=this.previousEl();if(a){var b=d(a);return b.selector=this.selector,b}return this},e.prototype.previousEl=function(){return this.firstEl().previousElementSibling},e.prototype.remove=function(){for(this.forEach(function(a){this.removeAllEvents(),a.parentNode.removeChild(a)});this._el.length>0;)this._el.shift();return this.length=0,this._onChange("remove"),this},e.prototype.removeAllEvents=function(){for(var a in this._events)for(var b in this._events[a])this.removeEvent(b);return this._onChange("removeAllEvents"),this},e.prototype.removeAttribute=function(a){return a&&"string"==typeof a?(this.forEach(function(b){b.removeAttribute(a)}),this._onChange("removeAttribute"),this):this},e.prototype.removeClass=function(a){return a&&"string"==typeof a?(/( )/i.test(a)&&(a=this.parseTo(a,"array")),this.forEach(function(b){this._removeClass.call(b,a)}),this._onChange("removeClass"),this):this},e.prototype.removeEvent=function(a,b,c){if(!a||"string"!=typeof a)return this;var d=this;return this.forEach(function(e){if(e in this._events){var f=this._events[e];if(a in f){for(var g=f[a],h=g.length;h--;){var i=g[h];b=b?b:i[0],c=c?c:i[1],e.removeEventListener(a,b,c)}setTimeout(function(){delete d._events[e][a]},16)}}}),this._onChange("removeEvent"),this},e.prototype.setAttribute=function(a,b){return a&&"string"==typeof a&&b&&"string"==typeof b?(this.forEach(function(c){c.setAttribute(a,b)}),this._onChange("setAttribute"),this):this},e.prototype.scrollIntoView=function(b){return b===a&&(b=!0),this._el[0].scrollIntoView(b),this},e.prototype.siblings=function(){var a=this.firstEl(),b=Array.prototype.filter.call(a.parentNode.children,function(b){return b!==a});if(b.length){var c=d(b);return c.selector=this.selector,c}return this},e.prototype.show=function(){return this.each(function(){this.style.display="block"}),this._onChange("listenable"),this},e.prototype.stopListening=function(a){if(!a||"string"!=typeof a)return this;var b=this._listeners[a];return b&&(b.length=0,delete this._listeners[a]),this},e.prototype.style=function(b,c){return b&&"string"==typeof b&&c?(this.el().style[b]!==a&&this.each(function(){this.style[b]=c}),this):this},e.prototype.text=function(a){return a&&"string"==typeof a?(this.firstEl().textContent=a,this):this.firstEl().textContent},e.prototype.toggle=function(){return this.forEach(function(a){a.style.display=a.clientHeight>0?"none":"block"}),this._onChange("toggle"),this},e.prototype.toggleClass=function(a){return a&&"string"==typeof a?(this.each(function(){this.classList.contains(a)?this.classList.remove(a):this.classList.add(a)}),this._onChange("toggleClass"),this):this},e.prototype.tojQuery=function(){return window.jQuery||"function"==typeof jQuery?$(this.els()):void 0},e.prototype.to$=function(){return this.tojQuery()},e.prototype.trigger=function(a){if(!a||"string"!=typeof a)return this;var b=document.createEvent("HTMLEvents");return b.initEvent(a,!0,!1),this.each(function(){this.dispatchEvent(b)}),this},window._Z||(window._Z=d),window.Zest||(window.Zest=e),d}();